{"remainingRequest":"C:\\Users\\MkdirP\\Downloads\\WebDev4\\WebDev4\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\MkdirP\\Downloads\\WebDev4\\WebDev4\\frontend\\src\\views\\Main.vue?vue&type=style&index=0&id=c1f1971a&lang=css&","dependencies":[{"path":"C:\\Users\\MkdirP\\Downloads\\WebDev4\\WebDev4\\frontend\\src\\views\\Main.vue","mtime":1679863502326},{"path":"C:\\Users\\MkdirP\\Downloads\\WebDev4\\WebDev4\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\MkdirP\\Downloads\\WebDev4\\WebDev4\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\MkdirP\\Downloads\\WebDev4\\WebDev4\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\MkdirP\\Downloads\\WebDev4\\WebDev4\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\MkdirP\\Downloads\\WebDev4\\WebDev4\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBpbXBvcnQgIi4uL2Fzc2V0cy9oZWFkZXIuY3NzIjsKQGltcG9ydCAiLi4vYXNzZXRzL2JvZHkuY3NzIjsKQGltcG9ydCAiLi4vYXNzZXRzL2FkYXB0aXZlLmNzcyI7Cg=="},{"version":3,"sources":["Main.vue"],"names":[],"mappings":";AAgbA;AACA;AACA","file":"Main.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"body-table\">\n\n    <div class=\"header\">\n      <div>\n        <p>Wang Mingzhi P32151</p>\n        <p>Variant 18000</p>\n      </div>\n    </div>\n\n    <div class=\"body\">\n      <div class=\"choose-area\">\n        <div id=\"graph-and-ttl\">\n          <svg id=\"graph_pic\" height=\"360\" width=\"360\" xmlns=\"http://www.w3.org/2000/svg\" @click=\"addPointFromGraph\">\n\n            <line stroke=\"black\" x1=\"0\" y1=\"180\" x2=\"360\" y2=\"180\"/>\n            <line stroke=\"black\" x1=\"180\" y1=\"0\" x2=\"180\" y2=\"360\"/>\n            <polygon fill=\"black\" points=\"180,0 174,15 186,15\" stroke=\"black\"/>\n            <polygon fill=\"black\" points=\"360,180 345,186 345,174\" stroke=\"black\"/>\n\n            <line stroke=\"black\" x1=\"240\" y1=\"185\" x2=\"240\" y2=\"175\"/>\n            <line stroke=\"black\" x1=\"300\" y1=\"185\" x2=\"300\" y2=\"175\"/>\n\n            <line stroke=\"black\" x1=\"60\" y1=\"185\" x2=\"60\" y2=\"175\"/>\n            <line stroke=\"black\" x1=\"120\" y1=\"185\" x2=\"120\" y2=\"175\"/>\n\n            <line stroke=\"black\" x1=\"175\" y1=\"120\" x2=\"185\" y2=\"120\"/>\n            <line stroke=\"black\" x1=\"175\" y1=\"60\" x2=\"185\" y2=\"60\"/>\n\n            <line stroke=\"black\" x1=\"175\" y1=\"240\" x2=\"185\" y2=\"240\"/>\n            <line stroke=\"black\" x1=\"175\" y1=\"300\" x2=\"185\" y2=\"300\"/>\n\n            <text fill=\"black\" x=\"230\" y=\"170\">1.5</text>\n            <text fill=\"black\" x=\"295\" y=\"170\">3</text>\n\n            <text fill=\"black\" x=\"50\" y=\"170\">-3</text>\n            <text fill=\"black\" x=\"105\" y=\"170\">-1.5</text>\n\n            <text fill=\"black\" x=\"190\" y=\"65\">3</text>\n            <text fill=\"black\" x=\"190\" y=\"125\">1.5</text>\n\n            <text fill=\"black\" x=\"190\" y=\"245\">-1.5</text>\n            <text fill=\"black\" x=\"190\" y=\"305\">-3</text>\n\n            <text fill=\"black\" x=\"350\" y=\"170\">X</text>\n            <text fill=\"black\" x=\"160\" y=\"15\">Y</text>\n\n            <polygon id=\"rectangle\" fill=\"#c777b9\"\n                     fill-opacity=\"0.6\"\n                     stroke=\"black\"\n                     points=\"180,180 300,180 300,60 180,60\"/>\n\n            <path id=\"circle\" fill=\"#c777b9\"\n                  fill-opacity=\"0.6\"\n                  stroke=\"black\"\n                  d=\"M 120 180 A 60 60, 90, 0, 0, 180 240 L 180 180\"/>\n\n            <polygon id=\"triangle\" fill=\"#c777b9\"\n                     fill-opacity=\"0.6\"\n                     stroke=\"black\"\n                     points=\"120,180 180,180 180,60\"/>\n          </svg>\n        </div>\n\n        <form id=\"hidden-form\" style=\"display: none\">\n          <input type=\"text\" id=\"pointX\"/>\n          <input type=\"text\" id=\"pointY\"/>\n          <input type=\"text\" id=\"pointR\"/>\n          <button type=\"submit\" id=\"hidden-btn\"></button>\n        </form>\n\n        <div>\n          <form id=\"coordinates-form\">\n            <div class=\"checkbox-area\">\n              <p>X:</p>\n              <a id=\"forXError\" style=\"font-size: 10px; font-style: oblique; color: #4C489D\"></a>\n              <div id=\"x-group\">\n                <div class=\"row\">\n                  <input class=\"ordinary-btn\" id=\"-5\" type=\"button\" value=\"-5\" name=\"x\"\n                         @click=\"rememberX(-5); paintButtons(-5)\">\n                  <input class=\"ordinary-btn\" id=\"-4\" type=\"button\" value=\"-4\" name=\"x\"\n                         @click=\"rememberX(-4); paintButtons(-4)\">\n                  <input class=\"ordinary-btn\" id=\"-3\" type=\"button\" value=\"-3\" name=\"x\"\n                         @click=\"rememberX(-3); paintButtons(-3)\">\n                </div>\n                <div class=\"row\">\n                  <input class=\"ordinary-btn\" id=\"-2\" type=\"button\" value=\"-2\" name=\"x\"\n                         @click=\"rememberX(-2); paintButtons(-2)\">\n                  <input class=\"ordinary-btn\" id=\"-1\" type=\"button\" value=\"-1\" name=\"x\"\n                         @click=\"rememberX(-1); paintButtons(-1)\">\n                  <input class=\"ordinary-btn\" id=\"0\" type=\"button\" value=\"0\" name=\"x\"\n                         @click=\"rememberX(0); paintButtons(0)\">\n                </div>\n                <div class=\"row\">\n                  <input class=\"ordinary-btn\" id=\"1\" type=\"button\" value=\"1\" name=\"x\"\n                         @click=\"rememberX(1); paintButtons(1)\">\n                  <input class=\"ordinary-btn\" id=\"2\" type=\"button\" value=\"2\" name=\"x\"\n                         @click=\"rememberX(2); paintButtons(2)\">\n                  <input class=\"ordinary-btn\" id=\"3\" type=\"button\" value=\"3\" name=\"x\"\n                         @click=\"rememberX(3); paintButtons(3)\">\n                </div>\n              </div>\n\n              <p>Y:</p>\n              <div>\n                <input id=\"yField\" type=\"text\" autocomplete=\"on\" name=\"y\" maxlength=\"8\" required=\"\" placeholder=\"(-5;3)\"\n                       onkeyup=\"value=value.replace(/[^\\0-9\\.]/g,'')\" onpaste=\"value=value.replace(/[^\\0-9\\.]/g,'')\"\n                       oncontextmenu = \"value=value.replace(/[^\\0-9\\.]/g,'')\"/>\n              </div>\n\n              <p>R:</p>\n              <div class=\"y-group\">\n                <div class=\"row\">\n                  <input class=\"ordinary-btn\" type=\"button\" value=\"-5\" name=\"r\" disabled>\n                  <input class=\"ordinary-btn\" type=\"button\" value=\"-4\" name=\"r\" disabled>\n                  <input class=\"ordinary-btn\" type=\"button\" value=\"-3\" name=\"r\" disabled>\n                </div>\n                <div class=\"row\">\n                  <input class=\"ordinary-btn\" type=\"button\" value=\"-2\" name=\"r\" disabled>\n                  <input class=\"ordinary-btn\" type=\"button\" value=\"-1\" name=\"r\" disabled>\n                  <input class=\"ordinary-btn\" type=\"button\" value=\"0\" name=\"r\" disabled>\n                </div>\n                <div class=\"row\">\n                  <input class=\"ordinary-btn-R\" id=\"r1\" type=\"button\" value=\"1\" name=\"r\"\n                         @click=\"rememberR(1); paintButtonsR('r1')\">\n                  <input class=\"ordinary-btn-R\" id=\"r2\" type=\"button\" value=\"2\" name=\"r\"\n                         @click=\"rememberR(2); paintButtonsR('r2')\">\n                  <input class=\"ordinary-btn-selected-R\" id=\"r3\" type=\"button\" value=\"3\" name=\"r\"\n                         @click=\"rememberR(3); ; paintButtonsR('r3')\">\n                </div>\n              </div>\n\n              <div class=\"buttons-area\">\n                <button id=\"function-btn\" type=\"button\" class=\"gradient-button\" @click=\"validateInput()\">\n                  Submit\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n\n      </div>\n    </div>\n\n    <div>\n      <div class=\"button-row\">\n        <button type=\"button\" class=\"gradient-button\" @click=\"logout\">LogOut</button>\n        <button type=\"button\" class=\"gradient-button\" @click=\"deletePoints\">Reset Table</button>\n      </div>\n      <div class=\"table-area\">\n        <table id=\"main-table\">\n          <caption>Result Table</caption>\n          <thead>\n          <tr >\n            <th class=\"col\" id=\"col1\">X</th>\n            <th class=\"col\">Y</th>\n            <th class=\"col\">R</th>\n            <th class=\"col\" id=\"col4\">Result</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr v-for=\"point in points\" v-bind:key=\"point.id\">\n            <td>{{ point.x }}</td>\n            <td>{{ point.y }}</td>\n            <td>{{ point.r }}</td>\n            <td>{{ point.result }}</td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"Main\",\n  data() {\n    return {\n      x: \"\",\n      y: \"\",\n      r: \"3\",\n      xGraph: \"\",\n      yGraph: \"\",\n      points: new Array(0)\n    }\n  },\n  //侦听器，用于监听属性的变化并执行相应的操作\n  watch: {\n    r() {\n      let r = parseFloat(this.r);\n      let circle = document.getElementById(\"circle\");\n      let rectangle = document.getElementById(\"rectangle\");\n      let triangle = document.getElementById(\"triangle\");\n      circle.setAttribute(\"d\", `M ${180 - 20 * r} 180 A 60 60, 90, 0, 0, 180 ${180 + 20 * r} L 180 180 `);\n      triangle.setAttribute(\"points\", `${180 - 20 * r},180 180,180 180,${180- 40 *r}`);\n      rectangle.setAttribute(\"points\", `180,180 ${180 + 40 *r},180 ${180 + 40 *r},${180- 40 *r} 180,${180- 40 *r} `);\n      this.drawPoints();\n    }\n  },\n  methods: {\n    addPoints() {\n      axios.post('http://localhost:8083/api/points/main', {\n        x: document.getElementById('pointX').value,\n        y: document.getElementById('yField').value.trim(),\n        r: this.r\n      }, {\n        headers: {\"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")}\n      }).then(() => {\n        this.getPoints();\n        this.drawPoints();\n      }, () => {\n        this.$swal.fire({\n          icon: \"error\",\n          text: \"The point couldn't be added\",\n          title: \":(\"\n        });\n      }).catch(() => {\n        this.$router.push({name: 'error-page-expired'})\n      })\n    },\n    getPoints() {\n      axios.get('http://localhost:8083/api/points/main', {\n        headers: {\"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")}\n      }).then((response) => {\n        this.points = response.data;\n        this.drawPoints();\n      }).catch(() => {\n        this.$router.push({name: 'error-page-expired'})\n      })\n    },\n\n    deletePoints() {\n      this.$swal.fire({\n        title: ':?',\n        text: \"Can't recover\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes',\n      }).then((result) => {\n        if (result.isConfirmed) {\n          axios.delete('http://localhost:8083/api/points/main', {\n            headers: {\"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")}\n          }).then(() => {\n            this.getPoints();\n            this.$swal.fire({\n              icon: \"success\",\n              text: \"Points removed\",\n              title: \":)\"\n            });\n          }, () => {\n            this.$swal.fire({\n              icon: \"error\",\n              text: \"Failed to delete dots\",\n              title: \":(\"\n            });\n          }).catch(() => {\n            this.$router.push({name: 'error-page-expired'})\n          })}\n      });\n    },\n\n    logout() {\n      this.$swal.fire({\n        title: ':?',\n        text: \"Sure to leave?\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes',\n      }).then((result) => {\n        if (result.isConfirmed) {\n          this.$swal.fire({\n            icon: \"success\",\n            text: \"Bye\",\n            title: \"Logout +ing\",\n          });\n          this.$router.push({name: \"auth-page\"}, () => localStorage.clear());\n        }\n      });\n    },\n\n    drawPoints() {\n      const svgSize = 360;\n      let r = parseFloat(this.r);\n      let svg = document.getElementById(\"graph_pic\")\n      let oldDots = document.querySelectorAll(\"circle\");\n      oldDots.forEach(oldDot => oldDot.parentNode.removeChild(oldDot));\n      console.log(this.points.length);\n      console.log(this.points)\n      if (this.points.length !== 0) {\n        this.points.forEach(point => {\n          let newPoint = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n          newPoint.setAttribute(\"id\", \"target-dot\");\n          newPoint.setAttribute(\"r\", \"3.5\");\n          newPoint.setAttribute(\"cx\", `${point.x * 40 + svgSize / 2}`);\n          newPoint.setAttribute(\"cy\", `${svgSize / 2 - point.y * 40}`);\n          if (point.r === r) {\n            newPoint.setAttribute(\"fill\", point.result === \"true\" ? \"green\" : \"red\");\n            newPoint.setAttribute(\"r\", \"4\");\n          } else {\n            newPoint.setAttribute(\"fill\", \"black\");\n            newPoint.setAttribute(\"opacity\", \"0.5\");\n          }\n          svg.appendChild(newPoint);\n        })\n      }\n    },\n    addPointFromGraph() {\n      let position = getMousePosition(document.getElementById(\"graph_pic\"), event);\n      this.xGraph = ((position.x - 180) / 40 ).toFixed(2);\n      this.yGraph = (( (180 - position.y)) / 40).toFixed(2);\n      console.log(position.x, position.y);\n      console.log(this.xGraph, this.yGraph);\n      if (this.r >= 1 && this.r <= 3) {\n        axios.post('http://localhost:8083/api/points/main', {\n          x: this.xGraph,\n          y: this.yGraph,\n          r: this.r,\n          // ttl: document.getElementById('ttlInput').value\n        }, {\n          headers: {\"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")}\n        }).then(() => {\n          this.getPoints();\n          this.drawPoints();\n        }, () => {\n          this.$swal.fire({\n            icon: \"error\",\n            text: \"No points added successfully\",\n            title: \":(\"\n          });\n        });\n      } else {\n        this.$swal.fire({\n          icon: \"error\",\n          text: \"Selected the wrong radius\",\n          title: \":(\"\n        });\n      }\n\n      function getMousePosition(element, event) {\n        let rect = element.getBoundingClientRect();\n        return {\n          x: event.clientX - rect.left,\n          y: event.clientY - rect.top\n        };\n      }\n    },\n\n    rememberX(value1) {\n      document.getElementById('pointX').value = value1;\n    }\n    ,\n    rememberR(value1) {\n      document.getElementById('pointR').value = value1;\n      this.r = value1;\n    }\n    ,\n    validateInput() {\n      let y;\n      let yText = document.getElementById(\"yField\");\n      y = yText.value.trim();\n      if (/^-?\\d+\\.?\\d*$/.test(y)) {\n        if (y >= 3 || y <= -5){\n          yText.setCustomValidity(\"Number outside the valid range\");\n          this.$swal.fire({\n            icon: \"error\",\n            text: \"Number outside the valid range\",\n            title: \":(\"\n          });\n        } else {\n          yText.setCustomValidity(\"\");\n          if (document.getElementById('pointX').value !== '') {\n            this.addPoints();\n          } else {\n            this.$swal.fire({\n              icon: \"error\",\n              text: \"Didn't choose X\",\n              title: \":(\"\n            });\n          }\n        }\n      } else {\n        this.$swal.fire({\n          icon: \"error\",\n          text: \"Didn't input Y or wrong input\",\n          title: \":(\"\n        });\n      }\n    },\n\n    paintButtons(id) {\n      let selected = document.querySelectorAll(\".ordinary-btn-selected\");\n      if (selected !== null) {\n        document.querySelectorAll(\".ordinary-btn-selected\").forEach(function (i) {\n              i.classList.toggle(\"ordinary-btn\");\n              i.classList.toggle(\"ordinary-btn-selected\");\n            }\n        )\n      }\n      document.getElementById(id).classList.toggle(\"ordinary-btn\");\n      document.getElementById(id).classList.toggle(\"ordinary-btn-selected\");\n    }\n    ,\n    paintButtonsR(id) {\n      let selected = document.querySelectorAll(\".ordinary-btn-selected-R\");\n      if (selected !== null) {\n        document.querySelectorAll(\".ordinary-btn-selected-R\").forEach(function (i) {\n              i.classList.toggle(\"ordinary-btn-R\");\n              i.classList.toggle(\"ordinary-btn-selected-R\");\n            }\n        )\n      }\n      document.getElementById(id).classList.toggle(\"ordinary-btn-R\");\n      document.getElementById(id).classList.toggle(\"ordinary-btn-selected-R\");\n    }\n  }\n  ,\n  mounted() {\n    this.getPoints();\n    this.drawPoints();\n  }\n}\n</script>\n\n<style>\n@import \"../assets/header.css\";\n@import \"../assets/body.css\";\n@import \"../assets/adaptive.css\";\n</style>"]}]}